{% extends 'base.html.twig' %}

{% block title %}Horoazhon - Accueil{% endblock %}

{% block body %}
<div class="page-header">
    <h1>Bienvenue sur Horoazhon</h1>
</div>

<form action="{{ path('biens_list') }}" method="GET" class="filters" style="margin-bottom: 2rem;">
    <div class="form-group">
        <label>Ville</label>
        <input type="text" name="ville" placeholder="Ex: Paris">
    </div>
    <div class="form-group">
        <label>Type</label>
        <select name="type">
            <option value="">Tous</option>
            <option value="APPARTEMENT">Appartement</option>
            <option value="MAISON">Maison</option>
            <option value="STUDIO">Studio</option>
            <option value="TERRAIN">Terrain</option>
        </select>
    </div>
    <div class="form-group">
        <label>Recherche</label>
        <select name="forSale">
            <option value="">Achat & Location</option>
            <option value="true">Achat uniquement</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Rechercher</button>
</form>

<h2 style="margin-bottom: 1rem;">Derniers biens</h2>
<div class="property-grid">
    {% for bien in biens %}
    <a href="{{ path('biens_detail', {id: bien.id}) }}" class="property-card" style="color: inherit; text-decoration: none;">
        <div class="info">
            <h3>{{ bien.type ?? 'Bien' }} - {{ bien.ville }}</h3>
            <div class="meta">{{ bien.rue }}, {{ bien.codePostal }}</div>
            <div class="meta">{{ bien.superficie }} m²</div>
            {% if bien.availableForSale %}
                <span class="badge badge-sale">Vente: {{ bien.salePrice|number_format(0, ',', ' ') }} €</span>
            {% endif %}
            {% if bien.availableForRent %}
                <span class="badge badge-rent">Location: {{ bien.monthlyRent|number_format(0, ',', ' ') }} €/mois</span>
            {% endif %}
            {% if bien.agence %}
                <div class="meta" style="margin-top: 0.5rem;">{{ bien.agence.nom }}</div>
            {% endif %}
        </div>
    </a>
    {% else %}
    <p>Aucun bien disponible.</p>
    {% endfor %}
</div>
{% endblock %}
