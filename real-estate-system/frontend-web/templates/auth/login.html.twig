{% extends 'base.html.twig' %}

{% block title %}Connexion - Horoazhon{% endblock %}

{% block stylesheets %}
<style>
    /* Make login page fill the entire viewport below the navbar */
    .container:has(.login-page) {
        padding: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
    }
    .container:has(.login-page) ~ .site-footer {
        display: none;
    }

    /* === PAGE BACKGROUND === */
    .login-page {
        min-height: calc(100vh - 64px);
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2.5rem 1rem;
        position: relative;
        overflow: hidden;
        background: linear-gradient(135deg, #eef2ff 0%, #f0f5ff 50%, #e8eeff 100%);
    }

    /* Grid pattern */
    .login-page::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image:
            linear-gradient(rgba(37,99,235,0.04) 1px, transparent 1px),
            linear-gradient(90deg, rgba(37,99,235,0.04) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
    }

    /* Floating geometric decorations */
    .deco { position: absolute; pointer-events: none; }
    .deco-1 {
        width: 220px; height: 220px; top: 5%; right: 5%;
        border: 2px solid rgba(37,99,235,0.07);
        border-radius: 16px;
        transform: rotate(15deg);
    }
    .deco-2 {
        width: 160px; height: 160px; bottom: 8%; left: 3%;
        border: 2px solid rgba(37,99,235,0.06);
        border-radius: 14px;
        transform: rotate(-12deg);
    }
    .deco-3 {
        width: 50px; height: 50px; top: 15%; left: 8%;
        border: 1.5px solid rgba(37,99,235,0.08);
        border-radius: 50%;
    }
    .deco-4 {
        width: 90px; height: 90px; bottom: 20%; right: 8%;
        border: 1.5px solid rgba(37,99,235,0.05);
        border-radius: 10px;
        transform: rotate(30deg);
    }
    .deco-5 {
        width: 20px; height: 20px; top: 40%; left: 15%;
        background: rgba(37,99,235,0.06);
        border-radius: 4px;
        transform: rotate(45deg);
    }
    .deco-6 {
        width: 14px; height: 14px; bottom: 35%; right: 18%;
        background: rgba(37,99,235,0.08);
        border-radius: 3px;
        transform: rotate(-20deg);
    }
    /* Cross shape */
    .deco-cross {
        top: 12%; left: 5%;
        width: 24px; height: 24px;
        position: absolute;
        pointer-events: none;
    }
    .deco-cross::before, .deco-cross::after {
        content: '';
        position: absolute;
        background: rgba(37,99,235,0.1);
        border-radius: 1px;
    }
    .deco-cross::before { width: 2px; height: 16px; top: 4px; left: 11px; }
    .deco-cross::after { width: 16px; height: 2px; top: 11px; left: 4px; }

    /* === BRAND SECTION (above card) === */
    .login-brand {
        text-align: center;
        margin-bottom: 2rem;
        position: relative;
        z-index: 1;
    }
    .login-brand .brand-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 56px;
        height: 56px;
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        border-radius: 16px;
        margin-bottom: 1rem;
        box-shadow: 0 4px 16px rgba(37,99,235,0.3);
    }
    .login-brand .brand-name {
        font-size: 1.75rem;
        font-weight: 800;
        color: #2563eb;
        letter-spacing: -0.5px;
        margin-bottom: 0.25rem;
    }
    .login-brand .brand-tagline {
        color: #64748b;
        font-size: 0.9rem;
    }

    /* === CARD (form only) === */
    .login-card {
        background: #fff;
        border-radius: 16px;
        border: 1px solid #e2e8f0;
        box-shadow: 0 4px 6px rgba(0,0,0,0.02), 0 12px 40px rgba(0,0,0,0.06);
        padding: 2rem 2.25rem;
        width: 100%;
        max-width: 440px;
        position: relative;
        z-index: 1;
    }

    /* === CARD HEADING === */
    .login-card h1 {
        text-align: left;
        margin-bottom: 0.25rem;
        color: #0f172a;
        font-size: 1.35rem;
        font-weight: 700;
        letter-spacing: -0.3px;
    }
    .login-card .login-subtitle {
        color: #64748b;
        font-size: 0.875rem;
        margin-bottom: 1.75rem;
        text-align: left;
    }

    /* === FORM === */
    .login-card .form-group {
        margin-bottom: 1.25rem;
    }
    .login-card .label-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 0.375rem;
    }
    .login-card .label-row label {
        font-size: 0.85rem;
        font-weight: 600;
        color: #374151;
        margin-bottom: 0;
    }
    .login-card .forgot-link {
        font-size: 0.8rem;
        color: #2563eb;
        font-weight: 500;
    }
    .login-card .forgot-link:hover { color: #1d4ed8; }

    /* Input with icon */
    .input-icon-wrap {
        position: relative;
    }
    .input-icon-wrap input {
        padding-left: 2.75rem !important;
    }
    .input-icon-wrap .input-icon {
        position: absolute;
        left: 0.875rem;
        top: 50%;
        transform: translateY(-50%);
        color: #94a3b8;
        pointer-events: none;
        display: flex;
    }

    .login-card .form-group input {
        padding: 0.75rem 1rem;
        border-radius: 10px;
        font-size: 0.9rem;
        border: 1px solid #e2e8f0;
        transition: border-color 0.2s, box-shadow 0.2s;
    }
    .login-card .form-group input:focus {
        border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
    }

    /* Button */
    .login-card .btn-primary {
        width: 100%;
        padding: 0.8rem;
        font-size: 0.95rem;
        font-weight: 600;
        border-radius: 10px;
        margin-top: 0.25rem;
    }

    /* === DIVIDER === */
    .login-divider {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin: 1.5rem 0;
        color: #cbd5e1;
        font-size: 0.8rem;
        font-weight: 500;
    }
    .login-divider::before,
    .login-divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: #e2e8f0;
    }

    /* === BOTTOM LINK === */
    .login-bottom {
        text-align: center;
        font-size: 0.875rem;
        color: #64748b;
    }
    .login-bottom a {
        color: #2563eb;
        font-weight: 600;
    }
    .login-bottom a:hover { color: #1d4ed8; }

    /* === ERROR === */
    .error-message {
        background: #fef2f2;
        border: 1px solid #fecaca;
        color: #991b1b;
        padding: 0.75rem 1rem;
        border-radius: 10px;
        margin-bottom: 1.25rem;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    .error-message::before { content: '\2717'; font-weight: bold; flex-shrink: 0; }

    /* === FOOTER === */
    .login-footer-text {
        text-align: center;
        font-size: 0.75rem;
        color: #94a3b8;
        margin-top: 2rem;
        position: relative;
        z-index: 1;
    }

    @media (max-width: 480px) {
        .login-card { padding: 1.75rem 1.5rem; }
        .deco { display: none; }
        .deco-cross { display: none; }
    }
</style>
{% endblock %}

{% block body %}
<div class="login-page">
    {# Geometric decorations #}
    <div class="deco deco-1"></div>
    <div class="deco deco-2"></div>
    <div class="deco deco-3"></div>
    <div class="deco deco-4"></div>
    <div class="deco deco-5"></div>
    <div class="deco deco-6"></div>
    <div class="deco-cross"></div>

    {# Brand section - ABOVE the card #}
    <div class="login-brand">
        <div class="brand-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
                <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <polyline points="9 22 9 12 15 12 15 22" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        <div class="brand-name">Horoazhon</div>
        <div class="brand-tagline">Gestion immobiliere simplifiee</div>
    </div>

    {# Login card - form only #}
    <div class="login-card">
        <h1>Connexion</h1>
        <p class="login-subtitle">Accedez a votre espace de gestion</p>

        {% if error %}
            <div class="error-message">{{ error }}</div>
        {% endif %}

        <form method="POST">
            <div class="form-group">
                <div class="label-row">
                    <label for="email">Adresse e-mail</label>
                </div>
                <div class="input-icon-wrap">
                    <span class="input-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 7l-10 7L2 7"/></svg>
                    </span>
                    <input type="email" id="email" name="email" placeholder="vous@exemple.com" required autofocus>
                </div>
            </div>

            <div class="form-group">
                <div class="label-row">
                    <label for="password">Mot de passe</label>
                    <a href="#" class="forgot-link" onclick="return false;">Mot de passe oublie ?</a>
                </div>
                <div class="input-icon-wrap">
                    <span class="input-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
                    </span>
                    <input type="password" id="password" name="password" placeholder="Entrez votre mot de passe" required>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Se connecter</button>
        </form>

        <div class="login-divider">ou</div>

        <div class="login-bottom">
            Pas encore de compte ? <a href="#">Creer un compte</a>
        </div>
    </div>

    <p class="login-footer-text">&copy; {{ "now"|date("Y") }} Horoazhon. Tous droits reserves.</p>
</div>
{% endblock %}
